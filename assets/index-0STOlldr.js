import{k as se,H as B,i as k,I as oe,c as y,g as le,w as L,J as Z,e as q,K as ie,L as re,M as ce,d as de,u as R,N as ue,n as pe,_ as fe,p as ve,O as he,r as K,a as ge,q as me,z as xe,E as I,G as z,P as D,j as M,t as V,Q as be,x as ye,R as _e}from"./index-C_XhC-YK.js";const we=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Oe(n){function a(e){return(...p)=>{if(!n.value)throw new Error("ECharts is not initialized yet.");return n.value[e].apply(n.value,p)}}function s(){const e=Object.create(null);return we.forEach(p=>{e[p]=a(p)}),e}return s()}function Ce(n,a,s){L([s,n,a],([e,p,g],C,_)=>{let u=null;if(e&&p&&g){const{offsetWidth:w,offsetHeight:f}=e,t=g===!0?{}:g,{throttle:l=100,onResize:i}=t;let m=!1;const c=()=>{p.resize(),i==null||i()},o=l?ce(c,l):c;u=new ResizeObserver(()=>{!m&&(m=!0,e.offsetWidth===w&&e.offsetHeight===f)||o()}),u.observe(e)}_(()=>{u&&(u.disconnect(),u=null)})})}const $e={autoresize:[Boolean,Object]},Ee=/^on[^a-z]/,J=n=>Ee.test(n);function Ie(n){const a={};for(const s in n)J(s)||(a[s]=n[s]);return a}function U(n,a){const s=de(n)?R(n):n;return s&&typeof s=="object"&&"value"in s?s.value||a:s||a}const Se="ecLoadingOptions";function Le(n,a,s){const e=k(Se,{}),p=y(()=>({...U(e,{}),...s==null?void 0:s.value}));Z(()=>{const g=n.value;g&&(a.value?g.showLoading(p.value):g.hideLoading())})}const Pe={loading:Boolean,loadingOptions:Object};let S=null;const Q="x-vue-echarts";function Ae(){if(S!=null)return S;if(typeof HTMLElement>"u"||typeof customElements>"u")return S=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")(Q)}catch{return S=!1}return S=!0}document.head.innerHTML+=`<style>x-vue-echarts{display:block;width:100%;height:100%;min-width:0}
</style>`;const ze=Ae(),X="ecTheme",Me="ecInitOptions",Te="ecUpdateOptions",G=/(^&?~?!?)native:/;var Fe=se({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...$e,...Pe},emits:{},inheritAttrs:!1,setup(n,{attrs:a}){const s=B(),e=B(),p=B(),g=k(X,null),C=k(Me,null),_=k(Te,null),{autoresize:u,manualUpdate:w,loading:f,loadingOptions:t}=oe(n),l=y(()=>p.value||n.option||null),i=y(()=>n.theme||U(g,{})),m=y(()=>n.initOptions||U(C,{})),c=y(()=>n.updateOptions||U(_,{})),o=y(()=>Ie(a)),v={},h=le().proxy.$listeners,O={};h?Object.keys(h).forEach(d=>{G.test(d)?v[d.replace(G,"$1")]=h[d]:O[d]=h[d]}):Object.keys(a).filter(d=>J(d)).forEach(d=>{let r=d.charAt(2).toLowerCase()+d.slice(3);if(r.indexOf("native:")===0){const $=`on${r.charAt(7).toUpperCase()}${r.slice(8)}`;v[$]=a[d];return}r.substring(r.length-4)==="Once"&&(r=`~${r.substring(0,r.length-4)}`),O[r]=a[d]});function P(d){if(!s.value)return;const r=e.value=ue(s.value,i.value,m.value);n.group&&(r.group=n.group),Object.keys(O).forEach(E=>{let x=O[E];if(!x)return;let b=E.toLowerCase();b.charAt(0)==="~"&&(b=b.substring(1),x.__once__=!0);let N=r;if(b.indexOf("zr:")===0&&(N=r.getZr(),b=b.substring(3)),x.__once__){delete x.__once__;const ae=x;x=(...ne)=>{ae(...ne),N.off(b,x)}}N.on(b,x)});function $(){r&&!r.isDisposed()&&r.resize()}function H(){const E=d||l.value;E&&r.setOption(E,c.value)}u.value?pe(()=>{$(),H()}):H()}function ee(d,r){n.manualUpdate&&(p.value=d),e.value?e.value.setOption(d,r||{}):P(d)}function j(){e.value&&(e.value.dispose(),e.value=void 0)}let A=null;L(w,d=>{typeof A=="function"&&(A(),A=null),d||(A=L(()=>n.option,(r,$)=>{r&&(e.value?e.value.setOption(r,{notMerge:r!==$,...c.value}):P())},{deep:!0}))},{immediate:!0}),L([i,m],()=>{j(),P()},{deep:!0}),Z(()=>{n.group&&e.value&&(e.value.group=n.group)});const te=Oe(e);return Le(e,f,t),Ce(e,u,s),q(()=>{P()}),ie(()=>{ze&&s.value?s.value.__dispose=j:j()}),{chart:e,root:s,setOption:ee,nonEventAttrs:o,nativeListeners:v,...te}},render(){const n={...this.nonEventAttrs,...this.nativeListeners};return n.ref="root",n.class=n.class?["echarts"].concat(n.class):"echarts",re(Q,n)}});const ke={class:"index"},Ue={class:"flex ml-10 bolder fz-18"},T="#FF5B5B",Y="#ff3737",F="#91F840",W="#6fda1a",je={__name:"index",setup(n){ve(X,"dark");const a=he(),s=K(null),e=ge({data:{list:[],volume:[],trend:[],category:[],openPrice:"",closePrice:"",priceUp:"",percent:""}}),p=y(()=>({red:e.data.closePrice>a.info.data.previousClose,green:e.data.closePrice<a.info.data.previousClose})),g=K(null);L(()=>a.candles.data,()=>{_(),C()},{deep:!0}),q(async()=>{Object.keys(a.candles.data).length===0||Object.keys(a.info.data).length===0||(_(),C())});const C=()=>{e.data.priceUp=(e.data.closePrice-a.info.data.previousClose).toFixed(2),e.data.percent=(e.data.priceUp/a.info.data.previousClose*100).toFixed(2)},_=()=>{e.data.list=a.candles.data.data.map(t=>[t.open,t.close,t.low,t.high]),e.data.trend=a.candles.data.data.map(t=>({value:[w(t.date),t.close]}));let f;e.data.volume=a.candles.data.data.map((t,l)=>{let i=1;return f&&(t.close>f?i=1:i=-1),f=t.close,[l,t.volume,i]}),e.data.category=a.candles.data.data.map(t=>w(t.date)),e.data.closePrice=e.data.list[e.data.list.length-1][1],e.data.openPrice=e.data.list[0][0],g.value={backgroundColor:"#131313",title:{text:"即時走勢",left:10,top:10,bottom:10,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0,0,0,0.3)",textStyle:{color:"#FFF"},formatter:function(t){let l=t.filter(h=>h.seriesIndex==0)[0],i=t.filter(h=>h.seriesIndex==1)[0],m=t.filter(h=>h.seriesIndex==2)[0],c,o,v;return l?(c=e.data.list[l.dataIndex-1]?e.data.list[l.dataIndex-1][1]:a.info.data.previousClose,o=(l.value[2]-c).toFixed(2),v=(o/c*100).toFixed(2),`<div style=" text-align: left;">
                            ${t[0].name} <br/>
                            <span style="color:${u(l.value[1],c)}">開 :<span style="margin-left: 20px">${l.value[1]}</span></span><br/>
                            <span style="color:${u(l.value[2],c)}">收 :<span style="margin-left: 20px">${l.value[2]}</span></span><br/>
                            <span style="color:${u(l.value[3],c)}">低 :<span style="margin-left: 20px">${l.value[3]}</span></span><br/>
                            <span style="color:${u(l.value[4],c)}">高 :<span style="margin-left: 20px">${l.value[4]}</span></span><br/> 
                            <span style="color:${u(o)}">${o>0?"漲":"跌"} :<span style="margin-left: 20px">${o>0?"+"+o:o}</span></span><br/>
                            <span style="color:${u(o)}">幅 :<span style="margin-left: 20px">${o>0?"+"+v:v}%</span></span><br/>
                            量 :<span style="margin-left: 20px">${(i.value[1]/1e8).toFixed(3)}億元</span><br/> 
                        </div>`):(c=a.info.data.previousClose,o=(m.value[1]-c).toFixed(2),v=(o/c*100).toFixed(2),`<div style=" text-align: left;">
                            ${t[0].name} <br/>
                            <span style="color:${u(m.value[1],a.info.data.previousClose)}">價 :<span style="margin-left: 20px">${m.value[1]}</span></span><br/>
                            <span style="color:${u(o)}">${o>0?"漲":"跌"} :<span style="margin-left: 20px">${o>0?"+"+o:o}</span></span><br/>
                            <span style="color:${u(o)}">幅 :<span style="margin-left: 20px">${o>0?"+"+v:v}%</span></span><br/>
                            量 :<span style="margin-left: 20px">${(i.value[1]/1e8).toFixed(3)}億元</span><br/> 
                        </div>`)},position:function(t,l,i,m,c){const o={top:10};return o[["left","right"][+(t[0]<c.viewSize[0]/2)]]=30,o}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},toolbox:{show:!0,top:10,right:10,feature:{mytooo:{show:!0,title:"Custom Button",icon:"path://m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z",onclick:function(){s.value.resize({width:1500})}}}},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:0,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:0,end:100}],visualMap:[{show:!1,seriesIndex:1,dimension:2,pieces:[{value:-1,color:F},{value:1,color:T}]},{show:!1,seriesIndex:2,dimension:1,pieces:[{lte:a.info.data.previousClose-1,color:W},{gt:a.info.data.previousClose,color:Y}]}],legend:{selected:{一分K:!1,走勢:!0},top:10,selectedMode:"single",data:["走勢","一分K"]},series:[{name:"一分K",type:"candlestick",data:e.data.list,itemStyle:{color:T,color0:F,borderColor:Y,borderColor0:W},tooltip:{formatter:function(t){return t.name+"<br>"+(t.data.coord||"")}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:e.data.volume},{name:"走勢",type:"line",showSymbol:!1,data:e.data.trend,markLine:{label:{show:!1},symbol:["none","none"],data:[{yAxis:a.info.data.previousClose,name:"固定值 100"}]},markPoint:{data:[{type:"max",name:"Max",label:{position:"top",distance:-10}},{type:"min",name:"Min",label:{position:"bottom",distance:-10}}],symbol:"image://",label:{show:!0,formatter:function(t){return t.value>a.info.data.previousClose?`{a|${t.value}}`:`{b|${t.value}}`},rich:{a:{color:T},b:{color:F}}}}}],grid:[{left:"10%",right:"8%",height:"50%"},{left:"10%",right:"8%",top:"63%",height:"16%"}],xAxis:[{type:"category",data:e.data.category,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:e.data.category,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0},splitLine:{lineStyle:{type:"dashed",color:"#3C3C3C",width:1}},min:t=>e.data.openPrice>a.info.data.previousClose?(a.info.data.previousClose*.99).toFixed(0):(t.min*.99).toFixed(0),max:t=>e.data.openPrice>a.info.data.previousClose?(t.max*1.01).toFixed(0):(a.info.data.previousClose*1.01).toFixed(0)},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}]}},u=(f,t=0)=>{if(f!=t)return f>t?T:F},w=(f,t)=>{let l=f,i=new Date(l),m=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0"),o=String(i.getDate()).padStart(2,"0"),v=String(i.getHours()).padStart(2,"0"),h=String(i.getMinutes()).padStart(2,"0"),O=String(i.getSeconds()).padStart(2,"0");return`${v}:${h}`};return(f,t)=>{const l=_e,i=be;return me(),xe("div",ke,[I("div",Ue,[I("div",null,z(R(a).info.data.name),1),I("div",{class:D([p.value,"ml-10"])},z(e.data.closePrice),3),I("div",{class:D([p.value,"ml-10"])},z(`${e.data.priceUp>0?"+":"-"}${e.data.priceUp}`),3),I("div",{class:D([p.value,"ml-10"])},z(`${e.data.priceUp>0?"+":"-"}${e.data.percent}%`),3)]),M(i,{gutter:20,class:"row"},{default:V(()=>[M(l,{span:10},{default:V(()=>[M(R(Fe),{ref_key:"chart",ref:s,class:"chart",option:g.value,autoresize:""},null,8,["option"])]),_:1}),M(l,{span:12},{default:V(()=>[ye(" 11 ")]),_:1})]),_:1})])}}},Be=fe(je,[["__scopeId","data-v-0524343c"]]);export{Be as default};
