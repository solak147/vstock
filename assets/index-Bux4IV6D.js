import{k as ae,H as N,i as $,I as ne,c as _,g as se,w as M,J as Y,e as W,K as oe,L as ie,M as le,n as re,N as ce,d as de,u as K,_ as ue,p as fe,O as pe,r as j,a as ge,q as he,z as ve,E as w,G as P,P as D,j as T,t as B,Q as me,x as xe,R as _e}from"./index-DHCEJfcc.js";const be=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Oe(t){function s(e){return(...c)=>{if(!t.value)throw new Error("ECharts is not initialized yet.");return t.value[e].apply(t.value,c)}}function n(){const e=Object.create(null);return be.forEach(c=>{e[c]=s(c)}),e}return n()}function ye(t,s,n){M([n,t,s],([e,c,d],C,p)=>{let a=null;if(e&&c&&d){const{offsetWidth:r,offsetHeight:l}=e,g=d===!0?{}:d,{throttle:u=100,onResize:f}=g;let h=!1;const v=()=>{c.resize(),f==null||f()},b=u?ce(v,u):v;a=new ResizeObserver(()=>{!h&&(h=!0,e.offsetWidth===r&&e.offsetHeight===l)||b()}),a.observe(e)}p(()=>{a&&(a.disconnect(),a=null)})})}const we={autoresize:[Boolean,Object]},Ee=/^on[^a-z]/,Z=t=>Ee.test(t);function Ce(t){const s={};for(const n in t)Z(n)||(s[n]=t[n]);return s}function z(t,s){const n=de(t)?K(t):t;return n&&typeof n=="object"&&"value"in n?n.value||s:n||s}const Se="ecLoadingOptions";function Ie(t,s,n){const e=$(Se,{}),c=_(()=>({...z(e,{}),...n==null?void 0:n.value}));Y(()=>{const d=t.value;d&&(s.value?d.showLoading(c.value):d.hideLoading())})}const Le={loading:Boolean,loadingOptions:Object};let E=null;const q="x-vue-echarts";function Ae(){if(E!=null)return E;if(typeof HTMLElement>"u"||typeof customElements>"u")return E=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")(q)}catch{return E=!1}return E=!0}document.head.innerHTML+=`<style>x-vue-echarts{display:block;width:100%;height:100%;min-width:0}
</style>`;const Pe=Ae(),J="ecTheme",Te="ecInitOptions",$e="ecUpdateOptions",G=/(^&?~?!?)native:/;var Me=ae({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...we,...Le},emits:{},inheritAttrs:!1,setup(t,{attrs:s}){const n=N(),e=N(),c=N(),d=$(J,null),C=$(Te,null),p=$($e,null),{autoresize:a,manualUpdate:r,loading:l,loadingOptions:g}=ne(t),u=_(()=>c.value||t.option||null),f=_(()=>t.theme||z(d,{})),h=_(()=>t.initOptions||z(C,{})),v=_(()=>t.updateOptions||z(p,{})),b=_(()=>Ce(s)),U={},S=se().proxy.$listeners,I={};S?Object.keys(S).forEach(i=>{G.test(i)?U[i.replace(G,"$1")]=S[i]:I[i]=S[i]}):Object.keys(s).filter(i=>Z(i)).forEach(i=>{let o=i.charAt(2).toLowerCase()+i.slice(3);if(o.indexOf("native:")===0){const O=`on${o.charAt(7).toUpperCase()}${o.slice(8)}`;U[O]=s[i];return}o.substring(o.length-4)==="Once"&&(o=`~${o.substring(0,o.length-4)}`),I[o]=s[i]});function L(i){if(!n.value)return;const o=e.value=le(n.value,f.value,h.value);t.group&&(o.group=t.group),Object.keys(I).forEach(y=>{let m=I[y];if(!m)return;let x=y.toLowerCase();x.charAt(0)==="~"&&(x=x.substring(1),m.__once__=!0);let F=o;if(x.indexOf("zr:")===0&&(F=o.getZr(),x=x.substring(3)),m.__once__){delete m.__once__;const ee=m;m=(...te)=>{ee(...te),F.off(x,m)}}F.on(x,m)});function O(){o&&!o.isDisposed()&&o.resize()}function V(){const y=i||u.value;y&&o.setOption(y,v.value)}a.value?re(()=>{O(),V()}):V()}function Q(i,o){t.manualUpdate&&(c.value=i),e.value?e.value.setOption(i,o||{}):L(i)}function k(){e.value&&(e.value.dispose(),e.value=void 0)}let A=null;M(r,i=>{typeof A=="function"&&(A(),A=null),i||(A=M(()=>t.option,(o,O)=>{o&&(e.value?e.value.setOption(o,{notMerge:o!==O,...v.value}):L())},{deep:!0}))},{immediate:!0}),M([f,h],()=>{k(),L()},{deep:!0}),Y(()=>{t.group&&e.value&&(e.value.group=t.group)});const X=Oe(e);return Ie(e,l,g),ye(e,a,n),W(()=>{L()}),oe(()=>{Pe&&n.value?n.value.__dispose=k:k()}),{chart:e,root:n,setOption:Q,nonEventAttrs:b,nativeListeners:U,...X}},render(){const t={...this.nonEventAttrs,...this.nativeListeners};return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",ie(q,t)}});const ze={class:"index"},Ue={class:"flex ml-10 bolder fz-18"},R="#FF5B5B",ke="#ff3737",H="#91F840",Fe="#6fda1a",Ne={__name:"index",setup(t){fe(J,"dark");const s=pe(),n=j(null),e=ge({data:{list:[],volume:[],category:[],closePrice:"",priceUp:"",percent:""}}),c={red:e.data.closePrice>s.info.data.previousClose,green:e.data.closePrice<s.info.data.previousClose},d=j(null);j(!1),W(async()=>{e.data.list=s.candles.data.data.map(a=>[a.open,a.close,a.low,a.high]);let p;e.data.volume=s.candles.data.data.map((a,r)=>{let l=1;return p&&(a.close>p?l=1:l=-1),p=a.close,[r,a.volume,l]}),e.data.category=s.candles.data.data.map(a=>C(a.date)),e.data.closePrice=e.data.list[e.data.list.length-1][1],e.data.priceUp=(e.data.closePrice-s.info.data.previousClose).toFixed(2),e.data.percent=(e.data.priceUp/s.info.data.previousClose*100).toFixed(2),d.value={backgroundColor:"#131313",title:{text:"即時走勢",left:10,top:10,bottom:10,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0,0,0,0.3)",textStyle:{color:"#FFF"},formatter:function(a){let r=a.filter(u=>u.axisIndex==0)[0],l=a.filter(u=>u.axisIndex==1)[0],g=(r.value[2]-e.data.list[r.dataIndex-1][1]).toFixed(2);return'<div style=" text-align: left;">'+a[0].name+'<br/>開 :<span style="margin-left: 20px"> '+r.value[1]+'</span><br/>收 :<span style="margin-left: 20px"> '+r.value[2]+'</span><br/>低 :<span style="margin-left: 20px"> '+r.value[3]+'</span><br/>高 :<span style="margin-left: 20px"> '+r.value[4]+`</span><br/><span style="color:${g>0?R:H}">${g>0?"漲":"跌"} :<span style="margin-left: 20px">${g}</span></span><br/>量 :<span style="margin-left: 20px"> `+(l.value[1]/1e8).toFixed(3)+"億元</span><br/></div>"},position:function(a,r,l,g,u){const f={top:10};return f[["left","right"][+(a[0]<u.viewSize[0]/2)]]=30,f}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:80,end:100}],visualMap:{show:!1,seriesIndex:1,dimension:2,pieces:[{value:-1,color:H},{value:1,color:R}]},series:[{name:"一分K",type:"candlestick",data:e.data.list,itemStyle:{color:R,color0:H,borderColor:ke,borderColor0:Fe},tooltip:{formatter:function(a){return a.name+"<br>"+(a.data.coord||"")}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:e.data.volume}],grid:[{left:"10%",right:"8%",height:"50%"},{left:"10%",right:"8%",top:"63%",height:"16%"}],xAxis:[{type:"category",data:e.data.category,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:e.data.category,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0},splitLine:{lineStyle:{type:"dashed",color:"#ccc",width:1}}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}]}});const C=(p,a)=>{let r=p,l=new Date(r),g=l.getFullYear(),u=String(l.getMonth()+1).padStart(2,"0"),f=String(l.getDate()).padStart(2,"0"),h=String(l.getHours()).padStart(2,"0"),v=String(l.getMinutes()).padStart(2,"0"),b=String(l.getSeconds()).padStart(2,"0");return`${h}:${v}`};return(p,a)=>{const r=_e,l=me;return he(),ve("div",ze,[w("div",Ue,[w("div",null,P(K(s).info.data.name),1),w("div",{class:D([c,"ml-10"])},P(e.data.closePrice),1),w("div",{class:D([c,"ml-10"])},P(`${e.data.priceUp>0?"+":"-"}${e.data.priceUp}`),1),w("div",{class:D([c,"ml-10"])},P(`${e.data.priceUp>0?"+":"-"}${e.data.percent}%`),1)]),T(l,{gutter:20,class:"row"},{default:B(()=>[T(r,{span:10},{default:B(()=>[T(K(Me),{ref_key:"chart",ref:n,class:"chart",option:d.value,autoresize:""},null,8,["option"])]),_:1}),T(r,{span:12},{default:B(()=>[xe(" 11 ")]),_:1})]),_:1})])}}},De=ue(Ne,[["__scopeId","data-v-bf1fcff0"]]);export{De as default};
