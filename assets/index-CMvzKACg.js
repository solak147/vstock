import{_ as B,H as k,r as b,a as I,w as z,e as M,q as A,z as V,j as $,I as C,u as m,p as E,c as R,J as U,E as h,G as S,t as D,K as G,v as P}from"./index-CpIbm6p6.js";import{E as T,T as Z}from"./index-aJSnPDNo.js";const F="#FF5B5B",L="#ff3737",_="#91F840",O="#6fda1a",W={__name:"RealTimeChart",props:{candles:{type:Object,default:{}}},emits:["reOrder"],setup(w,{emit:d}){const u=w,y=d,a=k(),f=b(null),x=b(null);let t=I({});z(()=>u.candles,()=>{t=u.candles,v()},{deep:!0}),M(()=>{t=u.candles,t.data.width=f.value.getWidth()});const v=()=>{x.value={backgroundColor:"#131313",title:{text:"即時走勢",left:10,top:10,bottom:10,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0,0,0,0.3)",textStyle:{color:"#FFF"},formatter:function(e){let o=e.filter(c=>c.seriesIndex==0)[0],r=e.filter(c=>c.seriesIndex==1)[0],i=e.filter(c=>c.seriesIndex==2)[0],n,s,p;return o?(n=t.data.list[o.dataIndex-1]?t.data.list[o.dataIndex-1][1]:a.info.data.previousClose,s=(o.value[2]-n).toFixed(2),p=(s/n*100).toFixed(2),`<div style=" text-align: left;">
                        ${e[0].name} <br/>
                        <span style="color:${l(o.value[1],n)}">開 :<span style="margin-left: 20px">${o.value[1]}</span></span><br/>
                        <span style="color:${l(o.value[2],n)}">收 :<span style="margin-left: 20px">${o.value[2]}</span></span><br/>
                        <span style="color:${l(o.value[3],n)}">低 :<span style="margin-left: 20px">${o.value[3]}</span></span><br/>
                        <span style="color:${l(o.value[4],n)}">高 :<span style="margin-left: 20px">${o.value[4]}</span></span><br/> 
                        <span style="color:${l(s)}">${s>0?"漲":"跌"} :<span style="margin-left: 20px">${s>0?"+"+s:s}</span></span><br/>
                        <span style="color:${l(s)}">幅 :<span style="margin-left: 20px">${s>0?"+"+p:p}%</span></span><br/>
                        量 :<span style="margin-left: 20px">${(r.value[1]/1e8).toFixed(3)}億元</span><br/> 
                    </div>`):(n=a.info.data.previousClose,s=(i.value[1]-n).toFixed(2),p=(s/n*100).toFixed(2),`<div style=" text-align: left;">
                        ${e[0].name} <br/>
                        <span style="color:${l(i.value[1],a.info.data.previousClose)}">價 :<span style="margin-left: 20px">${i.value[1]}</span></span><br/>
                        <span style="color:${l(s)}">${s>0?"漲":"跌"} :<span style="margin-left: 20px">${s>0?"+"+s:s}</span></span><br/>
                        <span style="color:${l(s)}">幅 :<span style="margin-left: 20px">${s>0?"+"+p:p}%</span></span><br/>
                        量 :<span style="margin-left: 20px">${(r.value[1]/1e8).toFixed(3)}億元</span><br/> 
                    </div>`)},position:function(e,o,r,i,n){const s={top:10};return s[["left","right"][+(e[0]<n.viewSize[0]/2)]]=30,s}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},toolbox:{show:!0,top:10,right:10,feature:{mytooo:{show:!0,title:"Custom Button",icon:"path://m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z",onclick:function(){f.value.resize({width:t.data.isBig?t.data.width:t.data.width*2}),t.data.isBig=!t.data.isBig,y("reOrder",t.data.isBig,0)}}}},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:0,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:0,end:100}],visualMap:[{show:!1,seriesIndex:1,dimension:2,pieces:[{value:-1,color:_},{value:1,color:F}]},{show:!1,seriesIndex:2,dimension:1,pieces:[{lte:a.info.data.previousClose-1,color:O},{gt:a.info.data.previousClose,color:L}]}],legend:{selected:{一分K:!1,走勢:!0},top:10,selectedMode:"single",data:["走勢","一分K"]},series:[{name:"一分K",type:"candlestick",data:t.data.list,itemStyle:{color:F,color0:_,borderColor:L,borderColor0:O},tooltip:{formatter:function(e){return e.name+"<br>"+(e.data.coord||"")}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:t.data.volume},{name:"走勢",type:"line",showSymbol:!1,data:t.data.trend,markLine:{label:{show:!1},symbol:["none","none"],data:[{yAxis:a.info.data.previousClose,name:"固定值 100"}],lineStyle:{color:"#FFF"}},markPoint:{data:[{type:"max",name:"Max",label:{position:"top",distance:-10}},{type:"min",name:"Min",label:{position:"bottom",distance:-10}}],symbol:"image://",label:{show:!0,formatter:function(e){return e.value>a.info.data.previousClose?`{a|${e.value}}`:`{b|${e.value}}`},rich:{a:{color:F},b:{color:_}}}}}],grid:[{left:"10%",right:"8%",height:"50%"},{left:"10%",right:"8%",top:"63%",height:"16%"}],xAxis:[{type:"category",data:t.data.category,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:t.data.category,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0},splitLine:{lineStyle:{type:"dashed",color:"#3C3C3C",width:1}},min:e=>t.data.currentSel=="一分K"?e.min:t.data.openPrice>a.info.data.previousClose?(a.info.data.previousClose*.99).toFixed(0):(e.min*.99).toFixed(0),max:e=>t.data.currentSel=="一分K"?e.max:t.data.openPrice>a.info.data.previousClose?(e.max*1.01).toFixed(0):(a.info.data.previousClose*1.01).toFixed(0)},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}]}},g=e=>{t.data.currentSel=e.name,f.value.resize()},l=(e,o=0)=>{if(e!=o)return e>o?F:_};return(e,o)=>{var r,i;return A(),V("div",null,[$(m(T),{ref_key:"chart",ref:f,class:C({chart:!((r=m(t).data)!=null&&r.isBig),chartBig:(i=m(t).data)==null?void 0:i.isBig}),option:x.value,onLegendselectchanged:g,autoresize:""},null,8,["class","option"])])}}},N=B(W,[["__scopeId","data-v-c088d45d"]]),K="#FF5B5B",X="#ff3737",H="#91F840",Y="#6fda1a",q={__name:"HistoryChart",props:{candles:{type:Object,default:{}}},emits:["reOrder"],setup(w,{emit:d}){const u=w,y=d,a=k(),f=b(null),x=b(null);let t=I({});z(()=>u.candles,()=>{t=u.candles,v()},{deep:!0}),M(()=>{t=u.candles,t.data.width=f.value.getWidth()});const v=()=>{x.value={backgroundColor:"#131313",title:{text:"股價走勢",left:10,top:10,bottom:10,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0,0,0,0.3)",textStyle:{color:"#FFF"},formatter:function(e){let o=e.filter(c=>c.seriesIndex==0)[0],r=e.filter(c=>c.seriesIndex==1)[0],i=e.filter(c=>c.seriesIndex==2)[0],n,s,p;return o?(n=t.data.list[o.dataIndex-1]?t.data.list[o.dataIndex-1][1]:a.info.data.previousClose,s=(o.value[2]-n).toFixed(2),p=(s/n*100).toFixed(2),`<div style=" text-align: left;">
                        ${e[0].name} <br/>
                        <span style="color:${l(o.value[1],n)}">開 :<span style="margin-left: 20px">${o.value[1]}</span></span><br/>
                        <span style="color:${l(o.value[2],n)}">收 :<span style="margin-left: 20px">${o.value[2]}</span></span><br/>
                        <span style="color:${l(o.value[3],n)}">低 :<span style="margin-left: 20px">${o.value[3]}</span></span><br/>
                        <span style="color:${l(o.value[4],n)}">高 :<span style="margin-left: 20px">${o.value[4]}</span></span><br/> 
                        <span style="color:${l(s)}">${s>0?"漲":"跌"} :<span style="margin-left: 20px">${s>0?"+"+s:s}</span></span><br/>
                        <span style="color:${l(s)}">幅 :<span style="margin-left: 20px">${s>0?"+"+p:p}%</span></span><br/>
                        量 :<span style="margin-left: 20px">${(r.value[1]/1e8).toFixed(3)}億元</span><br/> 
                    </div>`):(n=a.info.data.previousClose,s=(i.value[1]-n).toFixed(2),p=(s/n*100).toFixed(2),`<div style=" text-align: left;">
                        ${e[0].name} <br/>
                        <span style="color:${l(i.value[1],a.info.data.previousClose)}">價 :<span style="margin-left: 20px">${i.value[1]}</span></span><br/>
                        <span style="color:${l(s)}">${s>0?"漲":"跌"} :<span style="margin-left: 20px">${s>0?"+"+s:s}</span></span><br/>
                        <span style="color:${l(s)}">幅 :<span style="margin-left: 20px">${s>0?"+"+p:p}%</span></span><br/>
                        量 :<span style="margin-left: 20px">${(r.value[1]/1e8).toFixed(3)}億元</span><br/> 
                    </div>`)},position:function(e,o,r,i,n){const s={top:10};return s[["left","right"][+(e[0]<n.viewSize[0]/2)]]=30,s}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},toolbox:{show:!0,top:10,right:10,feature:{mytooo:{show:!0,title:"Custom Button",icon:"path://m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z",onclick:function(){f.value.resize({width:t.data.isBig?t.data.width:t.data.width*2}),t.data.isBig=!t.data.isBig,y("reOrder",t.data.isBig,1)}}}},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:0,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:0,end:100}],visualMap:[{show:!1,seriesIndex:0,dimension:1,pieces:[{lte:a.info.data.previousClose-1,color:Y},{gt:a.info.data.previousClose,color:X}]}],legend:{selected:{一分K:!1,走勢:!0},top:10,selectedMode:"single",data:["走勢","一分K"]},series:[{name:"走勢",type:"line",showSymbol:!1,data:t.data.trend,markLine:{label:{show:!1},symbol:["none","none"],data:[{yAxis:a.info.data.previousClose,name:"固定值 100"}],lineStyle:{color:"#FFF"}},markPoint:{data:[{type:"max",name:"Max",label:{position:"top",distance:-10}},{type:"min",name:"Min",label:{position:"bottom",distance:-10}}],symbol:"image://",label:{show:!0,formatter:function(e){return e.value>a.info.data.previousClose?`{a|${e.value}}`:`{b|${e.value}}`},rich:{a:{color:K},b:{color:H}}}}}],grid:[{left:"10%",right:"8%",height:"65%"}],xAxis:[{type:"category",data:t.data.category,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0},splitLine:{lineStyle:{type:"dashed",color:"#3C3C3C",width:1}},min:e=>t.data.currentSel=="一分K"?e.min:t.data.openPrice>a.info.data.previousClose?(a.info.data.previousClose*.99).toFixed(0):(e.min*.99).toFixed(0),max:e=>t.data.currentSel=="一分K"?e.max:t.data.openPrice>a.info.data.previousClose?(e.max*1.01).toFixed(0):(a.info.data.previousClose*1.01).toFixed(0)}]}},g=e=>{t.data.currentSel=e.name,f.value.resize()},l=(e,o=0)=>{if(e!=o)return e>o?K:H};return(e,o)=>{var r,i;return A(),V("div",null,[$(m(T),{ref_key:"chart",ref:f,class:C({chart:!((r=m(t).data)!=null&&r.isBig),chartBig:(i=m(t).data)==null?void 0:i.isBig}),option:x.value,onLegendselectchanged:g,autoresize:""},null,8,["class","option"])])}}},J=B(q,[["__scopeId","data-v-945aa0ba"]]),Q={class:"index"},ee={class:"flex ml-10 bolder fz-18"},te={class:"flex justify-around flex-wrap"},ae={__name:"index",setup(w){E(Z,"dark");const d=k();b(null);const u=b([1,2]),y=(l,e)=>{l&&(u.value=u.value.map(o=>o+1),u.value[e]=1)},a=I({data:{list:[],volume:[],trend:[],category:[],openPrice:"",closePrice:"",priceUp:"",percent:"",width:"",isBig:!1,currentSel:"走勢"}}),f=I({data:{trend:[],category:[]}}),x=R(()=>({red:a.data.closePrice>d.info.data.previousClose,green:a.data.closePrice<d.info.data.previousClose}));z(()=>d.candles.data,()=>{v(),t()},{deep:!0}),M(async()=>{if(Object.keys(d.candles.data).length===0||Object.keys(d.info.data).length===0)return;v(),t();let l=await U.Stock.getStockHistory("IX0001","D","2023-01-01","2023-12-01");f.data.trend=l.data.map(e=>({value:[e.date,e.close]})),f.data.category=l.data.map(e=>e.date)});const t=()=>{a.data.priceUp=(a.data.closePrice-d.info.data.previousClose).toFixed(2),a.data.percent=(a.data.priceUp/d.info.data.previousClose*100).toFixed(2)},v=()=>{a.data.list=d.candles.data.data.map(e=>[e.open,e.close,e.low,e.high]),a.data.trend=d.candles.data.data.map(e=>({value:[g(e.date),e.close]}));let l;a.data.volume=d.candles.data.data.map((e,o)=>{let r=1;return l&&(e.close>l?r=1:r=-1),l=e.close,[o,e.volume,r]}),a.data.category=d.candles.data.data.map(e=>g(e.date)),a.data.closePrice=a.data.list[a.data.list.length-1][1],a.data.openPrice=a.data.list[0][0]},g=(l,e)=>{let o=l,r=new Date(o),i=r.getFullYear(),n=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),p=String(r.getHours()).padStart(2,"0"),c=String(r.getMinutes()).padStart(2,"0"),j=String(r.getSeconds()).padStart(2,"0");return`${p}:${c}`};return(l,e)=>(A(),V("div",Q,[h("div",ee,[h("div",null,S(m(d).info.data.name),1),h("div",{class:C([x.value,"ml-10"])},S(a.data.closePrice),3),h("div",{class:C([x.value,"ml-10"])},S(`${a.data.priceUp>0?"+":"-"}${a.data.priceUp}`),3),h("div",{class:C([x.value,"ml-10"])},S(`${a.data.priceUp>0?"+":"-"}${a.data.percent}%`),3)]),h("div",te,[$(G,{name:"fade"},{default:D(()=>[$(N,{candles:a,style:P({order:u.value[0]}),onReOrder:y,class:"mb-10 orderAnimate"},null,8,["candles","style"]),$(J,{candles:f,style:P({order:u.value[1]}),onReOrder:y,class:"mb-10 orderAnimate"},null,8,["candles","style"])]),_:1})])]))}},le=B(ae,[["__scopeId","data-v-da19589d"]]);export{le as default};
