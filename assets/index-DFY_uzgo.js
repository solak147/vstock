import{k as se,H as N,i as k,I as oe,c as _,g as ie,w as P,J as Z,e as q,K as le,L as re,M as ce,d as de,u as R,N as ue,n as pe,_ as fe,p as ge,O as he,r as K,a as ve,q as me,z as xe,E as I,G as z,P as D,j as M,t as V,Q as be,x as ye,R as _e}from"./index-BjR9L_qk.js";const we=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Oe(n){function a(e){return(...u)=>{if(!n.value)throw new Error("ECharts is not initialized yet.");return n.value[e].apply(n.value,u)}}function s(){const e=Object.create(null);return we.forEach(u=>{e[u]=a(u)}),e}return s()}function Ce(n,a,s){P([s,n,a],([e,u,v],$,w)=>{let x=null;if(e&&u&&v){const{offsetWidth:g,offsetHeight:O}=e,p=v===!0?{}:v,{throttle:t=100,onResize:o}=p;let r=!1;const m=()=>{u.resize(),o==null||o()},d=t?ce(m,t):m;x=new ResizeObserver(()=>{!r&&(r=!0,e.offsetWidth===g&&e.offsetHeight===O)||d()}),x.observe(e)}w(()=>{x&&(x.disconnect(),x=null)})})}const $e={autoresize:[Boolean,Object]},Ee=/^on[^a-z]/,J=n=>Ee.test(n);function Se(n){const a={};for(const s in n)J(s)||(a[s]=n[s]);return a}function B(n,a){const s=de(n)?R(n):n;return s&&typeof s=="object"&&"value"in s?s.value||a:s||a}const Ie="ecLoadingOptions";function Le(n,a,s){const e=k(Ie,{}),u=_(()=>({...B(e,{}),...s==null?void 0:s.value}));Z(()=>{const v=n.value;v&&(a.value?v.showLoading(u.value):v.hideLoading())})}const Pe={loading:Boolean,loadingOptions:Object};let L=null;const Q="x-vue-echarts";function Ae(){if(L!=null)return L;if(typeof HTMLElement>"u"||typeof customElements>"u")return L=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")(Q)}catch{return L=!1}return L=!0}document.head.innerHTML+=`<style>x-vue-echarts{display:block;width:100%;height:100%;min-width:0}
</style>`;const ze=Ae(),X="ecTheme",Me="ecInitOptions",Te="ecUpdateOptions",G=/(^&?~?!?)native:/;var Fe=se({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...$e,...Pe},emits:{},inheritAttrs:!1,setup(n,{attrs:a}){const s=N(),e=N(),u=N(),v=k(X,null),$=k(Me,null),w=k(Te,null),{autoresize:x,manualUpdate:g,loading:O,loadingOptions:p}=oe(n),t=_(()=>u.value||n.option||null),o=_(()=>n.theme||B(v,{})),r=_(()=>n.initOptions||B($,{})),m=_(()=>n.updateOptions||B(w,{})),d=_(()=>Se(a)),i={},f=ie().proxy.$listeners,h={};f?Object.keys(f).forEach(c=>{G.test(c)?i[c.replace(G,"$1")]=f[c]:h[c]=f[c]}):Object.keys(a).filter(c=>J(c)).forEach(c=>{let l=c.charAt(2).toLowerCase()+c.slice(3);if(l.indexOf("native:")===0){const E=`on${l.charAt(7).toUpperCase()}${l.slice(8)}`;i[E]=a[c];return}l.substring(l.length-4)==="Once"&&(l=`~${l.substring(0,l.length-4)}`),h[l]=a[c]});function C(c){if(!s.value)return;const l=e.value=ue(s.value,o.value,r.value);n.group&&(l.group=n.group),Object.keys(h).forEach(S=>{let b=h[S];if(!b)return;let y=S.toLowerCase();y.charAt(0)==="~"&&(y=y.substring(1),b.__once__=!0);let j=l;if(y.indexOf("zr:")===0&&(j=l.getZr(),y=y.substring(3)),b.__once__){delete b.__once__;const ae=b;b=(...ne)=>{ae(...ne),j.off(y,b)}}j.on(y,b)});function E(){l&&!l.isDisposed()&&l.resize()}function H(){const S=c||t.value;S&&l.setOption(S,m.value)}x.value?pe(()=>{E(),H()}):H()}function ee(c,l){n.manualUpdate&&(u.value=c),e.value?e.value.setOption(c,l||{}):C(c)}function U(){e.value&&(e.value.dispose(),e.value=void 0)}let A=null;P(g,c=>{typeof A=="function"&&(A(),A=null),c||(A=P(()=>n.option,(l,E)=>{l&&(e.value?e.value.setOption(l,{notMerge:l!==E,...m.value}):C())},{deep:!0}))},{immediate:!0}),P([o,r],()=>{U(),C()},{deep:!0}),Z(()=>{n.group&&e.value&&(e.value.group=n.group)});const te=Oe(e);return Le(e,O,p),Ce(e,x,s),q(()=>{C()}),le(()=>{ze&&s.value?s.value.__dispose=U:U()}),{chart:e,root:s,setOption:ee,nonEventAttrs:d,nativeListeners:i,...te}},render(){const n={...this.nonEventAttrs,...this.nativeListeners};return n.ref="root",n.class=n.class?["echarts"].concat(n.class):"echarts",re(Q,n)}});const ke={class:"index"},Be={class:"flex ml-10 bolder fz-18"},T="#FF5B5B",W="#ff3737",F="#91F840",Y="#6fda1a",Ue={__name:"index",setup(n){ge(X,"dark");const a=he(),s=K(null),e=ve({data:{list:[],volume:[],trend:[],category:[],openPrice:"",closePrice:"",priceUp:"",percent:"",width:"",isBig:!1,currentSel:"走勢"}}),u=_(()=>({red:e.data.closePrice>a.info.data.previousClose,green:e.data.closePrice<a.info.data.previousClose})),v=K(null);P(()=>a.candles.data,()=>{w(),$()},{deep:!0}),q(async()=>{Object.keys(a.candles.data).length===0||Object.keys(a.info.data).length===0||(w(),$())});const $=()=>{e.data.priceUp=(e.data.closePrice-a.info.data.previousClose).toFixed(2),e.data.percent=(e.data.priceUp/a.info.data.previousClose*100).toFixed(2),e.data.width=s.value.getWidth()},w=()=>{e.data.list=a.candles.data.data.map(t=>[t.open,t.close,t.low,t.high]),e.data.trend=a.candles.data.data.map(t=>({value:[O(t.date),t.close]}));let p;e.data.volume=a.candles.data.data.map((t,o)=>{let r=1;return p&&(t.close>p?r=1:r=-1),p=t.close,[o,t.volume,r]}),e.data.category=a.candles.data.data.map(t=>O(t.date)),e.data.closePrice=e.data.list[e.data.list.length-1][1],e.data.openPrice=e.data.list[0][0],v.value={backgroundColor:"#131313",title:{text:"即時走勢",left:10,top:10,bottom:10,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0,0,0,0.3)",textStyle:{color:"#FFF"},formatter:function(t){let o=t.filter(h=>h.seriesIndex==0)[0],r=t.filter(h=>h.seriesIndex==1)[0],m=t.filter(h=>h.seriesIndex==2)[0],d,i,f;return o?(d=e.data.list[o.dataIndex-1]?e.data.list[o.dataIndex-1][1]:a.info.data.previousClose,i=(o.value[2]-d).toFixed(2),f=(i/d*100).toFixed(2),`<div style=" text-align: left;">
                            ${t[0].name} <br/>
                            <span style="color:${g(o.value[1],d)}">開 :<span style="margin-left: 20px">${o.value[1]}</span></span><br/>
                            <span style="color:${g(o.value[2],d)}">收 :<span style="margin-left: 20px">${o.value[2]}</span></span><br/>
                            <span style="color:${g(o.value[3],d)}">低 :<span style="margin-left: 20px">${o.value[3]}</span></span><br/>
                            <span style="color:${g(o.value[4],d)}">高 :<span style="margin-left: 20px">${o.value[4]}</span></span><br/> 
                            <span style="color:${g(i)}">${i>0?"漲":"跌"} :<span style="margin-left: 20px">${i>0?"+"+i:i}</span></span><br/>
                            <span style="color:${g(i)}">幅 :<span style="margin-left: 20px">${i>0?"+"+f:f}%</span></span><br/>
                            量 :<span style="margin-left: 20px">${(r.value[1]/1e8).toFixed(3)}億元</span><br/> 
                        </div>`):(d=a.info.data.previousClose,i=(m.value[1]-d).toFixed(2),f=(i/d*100).toFixed(2),`<div style=" text-align: left;">
                            ${t[0].name} <br/>
                            <span style="color:${g(m.value[1],a.info.data.previousClose)}">價 :<span style="margin-left: 20px">${m.value[1]}</span></span><br/>
                            <span style="color:${g(i)}">${i>0?"漲":"跌"} :<span style="margin-left: 20px">${i>0?"+"+i:i}</span></span><br/>
                            <span style="color:${g(i)}">幅 :<span style="margin-left: 20px">${i>0?"+"+f:f}%</span></span><br/>
                            量 :<span style="margin-left: 20px">${(r.value[1]/1e8).toFixed(3)}億元</span><br/> 
                        </div>`)},position:function(t,o,r,m,d){const i={top:10};return i[["left","right"][+(t[0]<d.viewSize[0]/2)]]=30,i}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},toolbox:{show:!0,top:10,right:10,feature:{mytooo:{show:!0,title:"Custom Button",icon:"path://m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z",onclick:function(){s.value.resize({width:e.data.isBig?e.data.width:1500}),e.data.isBig=!e.data.isBig}}}},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:0,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:0,end:100}],visualMap:[{show:!1,seriesIndex:1,dimension:2,pieces:[{value:-1,color:F},{value:1,color:T}]},{show:!1,seriesIndex:2,dimension:1,pieces:[{lte:a.info.data.previousClose-1,color:Y},{gt:a.info.data.previousClose,color:W}]}],legend:{selected:{一分K:!1,走勢:!0},top:10,selectedMode:"single",data:["走勢","一分K"]},series:[{name:"一分K",type:"candlestick",data:e.data.list,itemStyle:{color:T,color0:F,borderColor:W,borderColor0:Y},tooltip:{formatter:function(t){return t.name+"<br>"+(t.data.coord||"")}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:e.data.volume},{name:"走勢",type:"line",showSymbol:!1,data:e.data.trend,markLine:{label:{show:!1},symbol:["none","none"],data:[{yAxis:a.info.data.previousClose,name:"固定值 100"}]},markPoint:{data:[{type:"max",name:"Max",label:{position:"top",distance:-10}},{type:"min",name:"Min",label:{position:"bottom",distance:-10}}],symbol:"image://",label:{show:!0,formatter:function(t){return t.value>a.info.data.previousClose?`{a|${t.value}}`:`{b|${t.value}}`},rich:{a:{color:T},b:{color:F}}}}}],grid:[{left:"10%",right:"8%",height:"50%"},{left:"10%",right:"8%",top:"63%",height:"16%"}],xAxis:[{type:"category",data:e.data.category,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:e.data.category,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0},splitLine:{lineStyle:{type:"dashed",color:"#3C3C3C",width:1}},min:t=>e.data.currentSel=="一分K"?t.min:e.data.openPrice>a.info.data.previousClose?(a.info.data.previousClose*.99).toFixed(0):(t.min*.99).toFixed(0),max:t=>e.data.currentSel=="一分K"?t.max:e.data.openPrice>a.info.data.previousClose?(t.max*1.01).toFixed(0):(a.info.data.previousClose*1.01).toFixed(0)},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}]}},x=p=>{e.data.currentSel=p.name,s.value.resize()},g=(p,t=0)=>{if(p!=t)return p>t?T:F},O=(p,t)=>{let o=p,r=new Date(o),m=r.getFullYear(),d=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0"),f=String(r.getHours()).padStart(2,"0"),h=String(r.getMinutes()).padStart(2,"0"),C=String(r.getSeconds()).padStart(2,"0");return`${f}:${h}`};return(p,t)=>{const o=_e,r=be;return me(),xe("div",ke,[I("div",Be,[I("div",null,z(R(a).info.data.name),1),I("div",{class:D([u.value,"ml-10"])},z(e.data.closePrice),3),I("div",{class:D([u.value,"ml-10"])},z(`${e.data.priceUp>0?"+":"-"}${e.data.priceUp}`),3),I("div",{class:D([u.value,"ml-10"])},z(`${e.data.priceUp>0?"+":"-"}${e.data.percent}%`),3)]),M(r,{gutter:20,class:"row"},{default:V(()=>[M(o,{span:10},{default:V(()=>[M(R(Fe),{ref_key:"chart",ref:s,class:"chart",option:v.value,onLegendselectchanged:x,autoresize:""},null,8,["option"])]),_:1}),M(o,{span:12},{default:V(()=>[ye(" 11 ")]),_:1})]),_:1})])}}},Ne=fe(Ue,[["__scopeId","data-v-11794f13"]]);export{Ne as default};
