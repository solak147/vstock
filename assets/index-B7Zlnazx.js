import{_ as S,H as I,r as v,a as w,w as k,e as B,q as z,s as K,u as M,p as H,c as T,I as O,z as U,E as y,G as b,J as _,j as g,t as F,K as D,L as R}from"./index-CVOYL2pJ.js";import{E as j,T as Z}from"./index-U_GPjShL.js";const $="#FF5B5B",V="#ff3737",C="#91F840",A="#6fda1a",G={__name:"RealTimeChart",props:{candles:{type:Object,default:{}}},setup(h){const r=h,t=I(),c=v(null),f=v(null);let s=w({});k(()=>r.candles,()=>{s=r.candles,x()},{deep:!0}),B(()=>{s=r.candles,s.data.width=c.value.getWidth()});const x=()=>{f.value={backgroundColor:"#131313",title:{text:"即時走勢",left:10,top:10,bottom:10,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0,0,0,0.3)",textStyle:{color:"#FFF"},formatter:function(e){let o=e.filter(p=>p.seriesIndex==0)[0],i=e.filter(p=>p.seriesIndex==1)[0],u=e.filter(p=>p.seriesIndex==2)[0],n,a,d;return o?(n=s.data.list[o.dataIndex-1]?s.data.list[o.dataIndex-1][1]:t.info.data.previousClose,a=(o.value[2]-n).toFixed(2),d=(a/n*100).toFixed(2),`<div style=" text-align: left;">
                        ${e[0].name} <br/>
                        <span style="color:${l(o.value[1],n)}">開 :<span style="margin-left: 20px">${o.value[1]}</span></span><br/>
                        <span style="color:${l(o.value[2],n)}">收 :<span style="margin-left: 20px">${o.value[2]}</span></span><br/>
                        <span style="color:${l(o.value[3],n)}">低 :<span style="margin-left: 20px">${o.value[3]}</span></span><br/>
                        <span style="color:${l(o.value[4],n)}">高 :<span style="margin-left: 20px">${o.value[4]}</span></span><br/> 
                        <span style="color:${l(a)}">${a>0?"漲":"跌"} :<span style="margin-left: 20px">${a>0?"+"+a:a}</span></span><br/>
                        <span style="color:${l(a)}">幅 :<span style="margin-left: 20px">${a>0?"+"+d:d}%</span></span><br/>
                        量 :<span style="margin-left: 20px">${(i.value[1]/1e8).toFixed(3)}億元</span><br/> 
                    </div>`):(n=t.info.data.previousClose,a=(u.value[1]-n).toFixed(2),d=(a/n*100).toFixed(2),`<div style=" text-align: left;">
                        ${e[0].name} <br/>
                        <span style="color:${l(u.value[1],t.info.data.previousClose)}">價 :<span style="margin-left: 20px">${u.value[1]}</span></span><br/>
                        <span style="color:${l(a)}">${a>0?"漲":"跌"} :<span style="margin-left: 20px">${a>0?"+"+a:a}</span></span><br/>
                        <span style="color:${l(a)}">幅 :<span style="margin-left: 20px">${a>0?"+"+d:d}%</span></span><br/>
                        量 :<span style="margin-left: 20px">${(i.value[1]/1e8).toFixed(3)}億元</span><br/> 
                    </div>`)},position:function(e,o,i,u,n){const a={top:10};return a[["left","right"][+(e[0]<n.viewSize[0]/2)]]=30,a}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},toolbox:{show:!0,top:10,right:10,feature:{mytooo:{show:!0,title:"Custom Button",icon:"path://m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z",onclick:function(){c.value.resize({width:s.data.isBig?s.data.width:1500}),s.data.isBig=!s.data.isBig}}}},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:0,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:0,end:100}],visualMap:[{show:!1,seriesIndex:1,dimension:2,pieces:[{value:-1,color:C},{value:1,color:$}]},{show:!1,seriesIndex:2,dimension:1,pieces:[{lte:t.info.data.previousClose-1,color:A},{gt:t.info.data.previousClose,color:V}]}],legend:{selected:{一分K:!1,走勢:!0},top:10,selectedMode:"single",data:["走勢","一分K"]},series:[{name:"一分K",type:"candlestick",data:s.data.list,itemStyle:{color:$,color0:C,borderColor:V,borderColor0:A},tooltip:{formatter:function(e){return e.name+"<br>"+(e.data.coord||"")}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:s.data.volume},{name:"走勢",type:"line",showSymbol:!1,data:s.data.trend,markLine:{label:{show:!1},symbol:["none","none"],data:[{yAxis:t.info.data.previousClose,name:"固定值 100"}],lineStyle:{color:"#FFF"}},markPoint:{data:[{type:"max",name:"Max",label:{position:"top",distance:-10}},{type:"min",name:"Min",label:{position:"bottom",distance:-10}}],symbol:"image://",label:{show:!0,formatter:function(e){return e.value>t.info.data.previousClose?`{a|${e.value}}`:`{b|${e.value}}`},rich:{a:{color:$},b:{color:C}}}}}],grid:[{left:"10%",right:"8%",height:"50%"},{left:"10%",right:"8%",top:"63%",height:"16%"}],xAxis:[{type:"category",data:s.data.category,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:s.data.category,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0},splitLine:{lineStyle:{type:"dashed",color:"#3C3C3C",width:1}},min:e=>s.data.currentSel=="一分K"?e.min:s.data.openPrice>t.info.data.previousClose?(t.info.data.previousClose*.99).toFixed(0):(e.min*.99).toFixed(0),max:e=>s.data.currentSel=="一分K"?e.max:s.data.openPrice>t.info.data.previousClose?(e.max*1.01).toFixed(0):(t.info.data.previousClose*1.01).toFixed(0)},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}]}},m=e=>{s.data.currentSel=e.name,c.value.resize()},l=(e,o=0)=>{if(e!=o)return e>o?$:C};return(e,o)=>(z(),K(M(j),{ref_key:"chart",ref:c,class:"chart",option:f.value,onLegendselectchanged:m,autoresize:""},null,8,["option"]))}},W=S(G,[["__scopeId","data-v-f0148340"]]),L="#FF5B5B",N="#ff3737",P="#91F840",X="#6fda1a",Y={__name:"HistoryChart",props:{candles:{type:Object,default:{}}},setup(h){const r=h,t=I(),c=v(null),f=v(null);let s=w({});k(()=>r.candles,()=>{s=r.candles,x()},{deep:!0}),B(()=>{s=r.candles,s.data.width=c.value.getWidth()});const x=()=>{f.value={backgroundColor:"#131313",title:{text:"股價走勢",left:10,top:10,bottom:10,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0,0,0,0.3)",textStyle:{color:"#FFF"},formatter:function(e){let o=e.filter(p=>p.seriesIndex==0)[0],i=e.filter(p=>p.seriesIndex==1)[0],u=e.filter(p=>p.seriesIndex==2)[0],n,a,d;return o?(n=s.data.list[o.dataIndex-1]?s.data.list[o.dataIndex-1][1]:t.info.data.previousClose,a=(o.value[2]-n).toFixed(2),d=(a/n*100).toFixed(2),`<div style=" text-align: left;">
                        ${e[0].name} <br/>
                        <span style="color:${l(o.value[1],n)}">開 :<span style="margin-left: 20px">${o.value[1]}</span></span><br/>
                        <span style="color:${l(o.value[2],n)}">收 :<span style="margin-left: 20px">${o.value[2]}</span></span><br/>
                        <span style="color:${l(o.value[3],n)}">低 :<span style="margin-left: 20px">${o.value[3]}</span></span><br/>
                        <span style="color:${l(o.value[4],n)}">高 :<span style="margin-left: 20px">${o.value[4]}</span></span><br/> 
                        <span style="color:${l(a)}">${a>0?"漲":"跌"} :<span style="margin-left: 20px">${a>0?"+"+a:a}</span></span><br/>
                        <span style="color:${l(a)}">幅 :<span style="margin-left: 20px">${a>0?"+"+d:d}%</span></span><br/>
                        量 :<span style="margin-left: 20px">${(i.value[1]/1e8).toFixed(3)}億元</span><br/> 
                    </div>`):(n=t.info.data.previousClose,a=(u.value[1]-n).toFixed(2),d=(a/n*100).toFixed(2),`<div style=" text-align: left;">
                        ${e[0].name} <br/>
                        <span style="color:${l(u.value[1],t.info.data.previousClose)}">價 :<span style="margin-left: 20px">${u.value[1]}</span></span><br/>
                        <span style="color:${l(a)}">${a>0?"漲":"跌"} :<span style="margin-left: 20px">${a>0?"+"+a:a}</span></span><br/>
                        <span style="color:${l(a)}">幅 :<span style="margin-left: 20px">${a>0?"+"+d:d}%</span></span><br/>
                        量 :<span style="margin-left: 20px">${(i.value[1]/1e8).toFixed(3)}億元</span><br/> 
                    </div>`)},position:function(e,o,i,u,n){const a={top:10};return a[["left","right"][+(e[0]<n.viewSize[0]/2)]]=30,a}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},toolbox:{show:!0,top:10,right:10,feature:{mytooo:{show:!0,title:"Custom Button",icon:"path://m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z",onclick:function(){c.value.resize({width:s.data.isBig?s.data.width:1500}),s.data.isBig=!s.data.isBig}}}},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:0,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:0,end:100}],visualMap:[{show:!1,seriesIndex:0,dimension:1,pieces:[{lte:t.info.data.previousClose-1,color:X},{gt:t.info.data.previousClose,color:N}]}],legend:{selected:{一分K:!1,走勢:!0},top:10,selectedMode:"single",data:["走勢","一分K"]},series:[{name:"走勢",type:"line",showSymbol:!1,data:s.data.trend,markLine:{label:{show:!1},symbol:["none","none"],data:[{yAxis:t.info.data.previousClose,name:"固定值 100"}],lineStyle:{color:"#FFF"}},markPoint:{data:[{type:"max",name:"Max",label:{position:"top",distance:-10}},{type:"min",name:"Min",label:{position:"bottom",distance:-10}}],symbol:"image://",label:{show:!0,formatter:function(e){return e.value>t.info.data.previousClose?`{a|${e.value}}`:`{b|${e.value}}`},rich:{a:{color:L},b:{color:P}}}}}],grid:[{left:"10%",right:"8%",height:"65%"}],xAxis:[{type:"category",data:s.data.category,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0},splitLine:{lineStyle:{type:"dashed",color:"#3C3C3C",width:1}},min:e=>s.data.currentSel=="一分K"?e.min:s.data.openPrice>t.info.data.previousClose?(t.info.data.previousClose*.99).toFixed(0):(e.min*.99).toFixed(0),max:e=>s.data.currentSel=="一分K"?e.max:s.data.openPrice>t.info.data.previousClose?(e.max*1.01).toFixed(0):(t.info.data.previousClose*1.01).toFixed(0)}]}},m=e=>{s.data.currentSel=e.name,c.value.resize()},l=(e,o=0)=>{if(e!=o)return e>o?L:P};return(e,o)=>(z(),K(M(j),{ref_key:"chart",ref:c,class:"chart",option:f.value,onLegendselectchanged:m,autoresize:""},null,8,["option"]))}},q=S(Y,[["__scopeId","data-v-66c94e1e"]]),J={class:"index"},Q={class:"flex ml-10 bolder fz-18"},ee={__name:"index",setup(h){H(Z,"dark");const r=I();v(null);const t=w({data:{list:[],volume:[],trend:[],category:[],openPrice:"",closePrice:"",priceUp:"",percent:"",width:"",isBig:!1,currentSel:"走勢"}}),c=w({data:{trend:[],category:[]}}),f=T(()=>({red:t.data.closePrice>r.info.data.previousClose,green:t.data.closePrice<r.info.data.previousClose}));k(()=>r.candles.data,()=>{x(),s()},{deep:!0}),B(async()=>{if(Object.keys(r.candles.data).length===0||Object.keys(r.info.data).length===0)return;x(),s();let l=await O.Stock.getStockHistory("IX0001","D","2023-01-01","2023-12-01");c.data.trend=l.data.map(e=>({value:[e.date,e.close]})),c.data.category=l.data.map(e=>e.date)});const s=()=>{t.data.priceUp=(t.data.closePrice-r.info.data.previousClose).toFixed(2),t.data.percent=(t.data.priceUp/r.info.data.previousClose*100).toFixed(2)},x=()=>{t.data.list=r.candles.data.data.map(e=>[e.open,e.close,e.low,e.high]),t.data.trend=r.candles.data.data.map(e=>({value:[m(e.date),e.close]}));let l;t.data.volume=r.candles.data.data.map((e,o)=>{let i=1;return l&&(e.close>l?i=1:i=-1),l=e.close,[o,e.volume,i]}),t.data.category=r.candles.data.data.map(e=>m(e.date)),t.data.closePrice=t.data.list[t.data.list.length-1][1],t.data.openPrice=t.data.list[0][0]},m=(l,e)=>{let o=l,i=new Date(o),u=i.getFullYear(),n=String(i.getMonth()+1).padStart(2,"0"),a=String(i.getDate()).padStart(2,"0"),d=String(i.getHours()).padStart(2,"0"),p=String(i.getMinutes()).padStart(2,"0"),E=String(i.getSeconds()).padStart(2,"0");return`${d}:${p}`};return(l,e)=>{const o=R,i=D;return z(),U("div",J,[y("div",Q,[y("div",null,b(M(r).info.data.name),1),y("div",{class:_([f.value,"ml-10"])},b(t.data.closePrice),3),y("div",{class:_([f.value,"ml-10"])},b(`${t.data.priceUp>0?"+":"-"}${t.data.priceUp}`),3),y("div",{class:_([f.value,"ml-10"])},b(`${t.data.priceUp>0?"+":"-"}${t.data.percent}%`),3)]),g(i,{class:"row"},{default:F(()=>[g(o,{span:12,class:"flex justify-center"},{default:F(()=>[g(W,{candles:t},null,8,["candles"])]),_:1}),g(o,{span:12,class:"flex justify-center"},{default:F(()=>[g(q,{candles:c},null,8,["candles"])]),_:1})]),_:1})])}}},oe=S(ee,[["__scopeId","data-v-4e433db3"]]);export{oe as default};
