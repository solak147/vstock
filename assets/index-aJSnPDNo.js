import{k as W,a4 as y,i as w,a0 as F,c as d,g as G,w as L,a5 as H,e as V,a6 as Z,a7 as q,a8 as J,d as Q,u as X,a9 as ee,n as te}from"./index-CpIbm6p6.js";const ne=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function se(e){function o(t){return(...a)=>{if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[t].apply(e.value,a)}}function n(){const t=Object.create(null);return ne.forEach(a=>{t[a]=o(a)}),t}return n()}function ie(e,o,n){L([n,e,o],([t,a,l],D,I)=>{let c=null;if(t&&a&&l){const{offsetWidth:P,offsetHeight:z}=t,C=l===!0?{}:l,{throttle:m=100,onResize:f}=C;let h=!1;const p=()=>{a.resize(),f==null||f()},j=m?J(p,m):p;c=new ResizeObserver(()=>{!h&&(h=!0,t.offsetWidth===P&&t.offsetHeight===z)||j()}),c.observe(t)}I(()=>{c&&(c.disconnect(),c=null)})})}const oe={autoresize:[Boolean,Object]},ae=/^on[^a-z]/,S=e=>ae.test(e);function le(e){const o={};for(const n in e)S(n)||(o[n]=e[n]);return o}function A(e,o){const n=Q(e)?X(e):e;return n&&typeof n=="object"&&"value"in n?n.value||o:n||o}const ce="ecLoadingOptions";function re(e,o,n){const t=w(ce,{}),a=d(()=>({...A(t,{}),...n==null?void 0:n.value}));H(()=>{const l=e.value;l&&(o.value?l.showLoading(a.value):l.hideLoading())})}const ue={loading:Boolean,loadingOptions:Object};let O=null;const $="x-vue-echarts";function fe(){if(O!=null)return O;if(typeof HTMLElement>"u"||typeof customElements>"u")return O=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")($)}catch{return O=!1}return O=!0}document.head.innerHTML+=`<style>x-vue-echarts{display:block;width:100%;height:100%;min-width:0}
</style>`;const de=fe(),he="ecTheme",pe="ecInitOptions",ve="ecUpdateOptions",R=/(^&?~?!?)native:/;var Oe=W({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...oe,...ue},emits:{},inheritAttrs:!1,setup(e,{attrs:o}){const n=y(),t=y(),a=y(),l=w(he,null),D=w(pe,null),I=w(ve,null),{autoresize:c,manualUpdate:P,loading:z,loadingOptions:C}=F(e),m=d(()=>a.value||e.option||null),f=d(()=>e.theme||A(l,{})),h=d(()=>e.initOptions||A(D,{})),p=d(()=>e.updateOptions||A(I,{})),j=d(()=>le(o)),x={},E=G().proxy.$listeners,_={};E?Object.keys(E).forEach(i=>{R.test(i)?x[i.replace(R,"$1")]=E[i]:_[i]=E[i]}):Object.keys(o).filter(i=>S(i)).forEach(i=>{let s=i.charAt(2).toLowerCase()+i.slice(3);if(s.indexOf("native:")===0){const v=`on${s.charAt(7).toUpperCase()}${s.slice(8)}`;x[v]=o[i];return}s.substring(s.length-4)==="Once"&&(s=`~${s.substring(0,s.length-4)}`),_[s]=o[i]});function b(i){if(!n.value)return;const s=t.value=ee(n.value,f.value,h.value);e.group&&(s.group=e.group),Object.keys(_).forEach(g=>{let r=_[g];if(!r)return;let u=g.toLowerCase();u.charAt(0)==="~"&&(u=u.substring(1),r.__once__=!0);let U=s;if(u.indexOf("zr:")===0&&(U=s.getZr(),u=u.substring(3)),r.__once__){delete r.__once__;const B=r;r=(...Y)=>{B(...Y),U.off(u,r)}}U.on(u,r)});function v(){s&&!s.isDisposed()&&s.resize()}function N(){const g=i||m.value;g&&s.setOption(g,p.value)}c.value?te(()=>{v(),N()}):N()}function K(i,s){e.manualUpdate&&(a.value=i),t.value?t.value.setOption(i,s||{}):b(i)}function M(){t.value&&(t.value.dispose(),t.value=void 0)}let T=null;L(P,i=>{typeof T=="function"&&(T(),T=null),i||(T=L(()=>e.option,(s,v)=>{s&&(t.value?t.value.setOption(s,{notMerge:s!==v,...p.value}):b())},{deep:!0}))},{immediate:!0}),L([f,h],()=>{M(),b()},{deep:!0}),H(()=>{e.group&&t.value&&(t.value.group=e.group)});const k=se(t);return re(t,z,C),ie(t,c,n),V(()=>{b()}),Z(()=>{de&&n.value?n.value.__dispose=M:M()}),{chart:t,root:n,setOption:K,nonEventAttrs:j,nativeListeners:x,...k}},render(){const e={...this.nonEventAttrs,...this.nativeListeners};return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",q($,e)}});export{Oe as E,he as T};
