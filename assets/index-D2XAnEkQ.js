import{k as ae,H as F,i as k,I as ne,c as y,g as se,w as L,J as Y,e as W,K as oe,L as ie,M as le,N as re,n as ce,d as de,u as H,_ as ue,p as fe,O as pe,r as V,a as ge,q as he,z as ve,E as I,G as $,P as N,j as M,t as D,Q as me,x as xe,R as _e}from"./index-Ck0N5JUO.js";const be=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Oe(t){function a(e){return(...c)=>{if(!t.value)throw new Error("ECharts is not initialized yet.");return t.value[e].apply(t.value,c)}}function n(){const e=Object.create(null);return be.forEach(c=>{e[c]=a(c)}),e}return n()}function ye(t,a,n){L([n,t,a],([e,c,f],w,x)=>{let p=null;if(e&&c&&f){const{offsetWidth:g,offsetHeight:s}=e,r=f===!0?{}:f,{throttle:i=100,onResize:d}=r;let u=!1;const h=()=>{c.resize(),d==null||d()},_=i?le(h,i):h;p=new ResizeObserver(()=>{!u&&(u=!0,e.offsetWidth===g&&e.offsetHeight===s)||_()}),p.observe(e)}x(()=>{p&&(p.disconnect(),p=null)})})}const we={autoresize:[Boolean,Object]},Ee=/^on[^a-z]/,Z=t=>Ee.test(t);function Ce(t){const a={};for(const n in t)Z(n)||(a[n]=t[n]);return a}function z(t,a){const n=de(t)?H(t):t;return n&&typeof n=="object"&&"value"in n?n.value||a:n||a}const Ie="ecLoadingOptions";function Se(t,a,n){const e=k(Ie,{}),c=y(()=>({...z(e,{}),...n==null?void 0:n.value}));Y(()=>{const f=t.value;f&&(a.value?f.showLoading(c.value):f.hideLoading())})}const Le={loading:Boolean,loadingOptions:Object};let S=null;const q="x-vue-echarts";function Ae(){if(S!=null)return S;if(typeof HTMLElement>"u"||typeof customElements>"u")return S=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")(q)}catch{return S=!1}return S=!0}document.head.innerHTML+=`<style>x-vue-echarts{display:block;width:100%;height:100%;min-width:0}
</style>`;const Pe=Ae(),J="ecTheme",Te="ecInitOptions",$e="ecUpdateOptions",G=/(^&?~?!?)native:/;var Me=ae({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...we,...Le},emits:{},inheritAttrs:!1,setup(t,{attrs:a}){const n=F(),e=F(),c=F(),f=k(J,null),w=k(Te,null),x=k($e,null),{autoresize:p,manualUpdate:g,loading:s,loadingOptions:r}=ne(t),i=y(()=>c.value||t.option||null),d=y(()=>t.theme||z(f,{})),u=y(()=>t.initOptions||z(w,{})),h=y(()=>t.updateOptions||z(x,{})),_=y(()=>Ce(a)),b={},O=se().proxy.$listeners,A={};O?Object.keys(O).forEach(l=>{G.test(l)?b[l.replace(G,"$1")]=O[l]:A[l]=O[l]}):Object.keys(a).filter(l=>Z(l)).forEach(l=>{let o=l.charAt(2).toLowerCase()+l.slice(3);if(o.indexOf("native:")===0){const E=`on${o.charAt(7).toUpperCase()}${o.slice(8)}`;b[E]=a[l];return}o.substring(o.length-4)==="Once"&&(o=`~${o.substring(0,o.length-4)}`),A[o]=a[l]});function P(l){if(!n.value)return;const o=e.value=re(n.value,d.value,u.value);t.group&&(o.group=t.group),Object.keys(A).forEach(C=>{let v=A[C];if(!v)return;let m=C.toLowerCase();m.charAt(0)==="~"&&(m=m.substring(1),v.__once__=!0);let j=o;if(m.indexOf("zr:")===0&&(j=o.getZr(),m=m.substring(3)),v.__once__){delete v.__once__;const ee=v;v=(...te)=>{ee(...te),j.off(m,v)}}j.on(m,v)});function E(){o&&!o.isDisposed()&&o.resize()}function K(){const C=l||i.value;C&&o.setOption(C,h.value)}p.value?ce(()=>{E(),K()}):K()}function Q(l,o){t.manualUpdate&&(c.value=l),e.value?e.value.setOption(l,o||{}):P(l)}function U(){e.value&&(e.value.dispose(),e.value=void 0)}let T=null;L(g,l=>{typeof T=="function"&&(T(),T=null),l||(T=L(()=>t.option,(o,E)=>{o&&(e.value?e.value.setOption(o,{notMerge:o!==E,...h.value}):P())},{deep:!0}))},{immediate:!0}),L([d,u],()=>{U(),P()},{deep:!0}),Y(()=>{t.group&&e.value&&(e.value.group=t.group)});const X=Oe(e);return Se(e,s,r),ye(e,p,n),W(()=>{P()}),oe(()=>{Pe&&n.value?n.value.__dispose=U:U()}),{chart:e,root:n,setOption:Q,nonEventAttrs:_,nativeListeners:b,...X}},render(){const t={...this.nonEventAttrs,...this.nativeListeners};return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",ie(q,t)}});const ke={class:"index"},ze={class:"flex ml-10 bolder fz-18"},B="#FF5B5B",Ue="#ff3737",R="#91F840",je="#6fda1a",Fe={__name:"index",setup(t){fe(J,"dark");const a=pe(),n=V(null),e=ge({data:{list:[],volume:[],category:[],closePrice:"",priceUp:"",percent:""}}),c={red:e.data.closePrice>a.info.data.previousClose,green:e.data.closePrice<a.info.data.previousClose},f=V(null);L(()=>a.candles.data,()=>{x(),w()},{deep:!0}),W(async()=>{Object.keys(a.candles.data).length===0||Object.keys(a.info.data).length===0||(x(),w())});const w=()=>{e.data.priceUp=(e.data.closePrice-a.info.data.previousClose).toFixed(2),e.data.percent=(e.data.priceUp/a.info.data.previousClose*100).toFixed(2)},x=()=>{e.data.list=a.candles.data.data.map(s=>[s.open,s.close,s.low,s.high]);let g;e.data.volume=a.candles.data.data.map((s,r)=>{let i=1;return g&&(s.close>g?i=1:i=-1),g=s.close,[r,s.volume,i]}),e.data.category=a.candles.data.data.map(s=>p(s.date)),e.data.closePrice=e.data.list[e.data.list.length-1][1],f.value={backgroundColor:"#131313",title:{text:"即時走勢",left:10,top:10,bottom:10,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0,0,0,0.3)",textStyle:{color:"#FFF"},formatter:function(s){let r=s.filter(u=>u.axisIndex==0)[0],i=s.filter(u=>u.axisIndex==1)[0],d=(r.value[2]-e.data.list[r.dataIndex-1][1]).toFixed(2);return'<div style=" text-align: left;">'+s[0].name+'<br/>開 :<span style="margin-left: 20px"> '+r.value[1]+'</span><br/>收 :<span style="margin-left: 20px"> '+r.value[2]+'</span><br/>低 :<span style="margin-left: 20px"> '+r.value[3]+'</span><br/>高 :<span style="margin-left: 20px"> '+r.value[4]+`</span><br/><span style="color:${d>0?B:R}">${d>0?"漲":"跌"} :<span style="margin-left: 20px">${d}</span></span><br/>量 :<span style="margin-left: 20px"> `+(i.value[1]/1e8).toFixed(3)+"億元</span><br/></div>"},position:function(s,r,i,d,u){const h={top:10};return h[["left","right"][+(s[0]<u.viewSize[0]/2)]]=30,h}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:80,end:100}],visualMap:{show:!1,seriesIndex:1,dimension:2,pieces:[{value:-1,color:R},{value:1,color:B}]},series:[{name:"一分K",type:"candlestick",data:e.data.list,itemStyle:{color:B,color0:R,borderColor:Ue,borderColor0:je},tooltip:{formatter:function(s){return s.name+"<br>"+(s.data.coord||"")}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:e.data.volume}],grid:[{left:"10%",right:"8%",height:"50%"},{left:"10%",right:"8%",top:"63%",height:"16%"}],xAxis:[{type:"category",data:e.data.category,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:e.data.category,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0},splitLine:{lineStyle:{type:"dashed",color:"#ccc",width:1}}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}]}},p=(g,s)=>{let r=g,i=new Date(r),d=i.getFullYear(),u=String(i.getMonth()+1).padStart(2,"0"),h=String(i.getDate()).padStart(2,"0"),_=String(i.getHours()).padStart(2,"0"),b=String(i.getMinutes()).padStart(2,"0"),O=String(i.getSeconds()).padStart(2,"0");return`${_}:${b}`};return(g,s)=>{const r=_e,i=me;return he(),ve("div",ke,[I("div",ze,[I("div",null,$(H(a).info.data.name),1),I("div",{class:N([c,"ml-10"])},$(e.data.closePrice),1),I("div",{class:N([c,"ml-10"])},$(`${e.data.priceUp>0?"+":"-"}${e.data.priceUp}`),1),I("div",{class:N([c,"ml-10"])},$(`${e.data.priceUp>0?"+":"-"}${e.data.percent}%`),1)]),M(i,{gutter:20,class:"row"},{default:D(()=>[M(r,{span:10},{default:D(()=>[M(H(Me),{ref_key:"chart",ref:n,class:"chart",option:f.value,autoresize:""},null,8,["option"])]),_:1}),M(r,{span:12},{default:D(()=>[xe(" 11 ")]),_:1})]),_:1})])}}},De=ue(Fe,[["__scopeId","data-v-4e76cdff"]]);export{De as default};
