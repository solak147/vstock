import{k as se,H as F,i as M,I as oe,c as b,g as le,w as L,J as Z,e as q,K as ie,L as re,M as ce,d as de,u as H,N as ue,n as pe,_ as fe,p as ge,O as he,r as V,a as ve,q as me,z as xe,E as I,G as T,P as N,j as k,t as D,Q as _e,x as be,R as ye}from"./index-Db8c17P2.js";const Oe=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function we(t){function a(e){return(...d)=>{if(!t.value)throw new Error("ECharts is not initialized yet.");return t.value[e].apply(t.value,d)}}function s(){const e=Object.create(null);return Oe.forEach(d=>{e[d]=a(d)}),e}return s()}function Ce(t,a,s){L([s,t,a],([e,d,g],C,y)=>{let u=null;if(e&&d&&g){const{offsetWidth:O,offsetHeight:f}=e,n=g===!0?{}:g,{throttle:o=100,onResize:i}=n;let p=!1;const c=()=>{d.resize(),i==null||i()},h=o?ce(c,o):c;u=new ResizeObserver(()=>{!p&&(p=!0,e.offsetWidth===O&&e.offsetHeight===f)||h()}),u.observe(e)}y(()=>{u&&(u.disconnect(),u=null)})})}const Ee={autoresize:[Boolean,Object]},$e=/^on[^a-z]/,J=t=>$e.test(t);function Ie(t){const a={};for(const s in t)J(s)||(a[s]=t[s]);return a}function z(t,a){const s=de(t)?H(t):t;return s&&typeof s=="object"&&"value"in s?s.value||a:s||a}const Se="ecLoadingOptions";function Le(t,a,s){const e=M(Se,{}),d=b(()=>({...z(e,{}),...s==null?void 0:s.value}));Z(()=>{const g=t.value;g&&(a.value?g.showLoading(d.value):g.hideLoading())})}const Ae={loading:Boolean,loadingOptions:Object};let S=null;const Q="x-vue-echarts";function Pe(){if(S!=null)return S;if(typeof HTMLElement>"u"||typeof customElements>"u")return S=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")(Q)}catch{return S=!1}return S=!0}document.head.innerHTML+=`<style>x-vue-echarts{display:block;width:100%;height:100%;min-width:0}
</style>`;const Te=Pe(),X="ecTheme",ke="ecInitOptions",Me="ecUpdateOptions",G=/(^&?~?!?)native:/;var ze=se({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...Ee,...Ae},emits:{},inheritAttrs:!1,setup(t,{attrs:a}){const s=F(),e=F(),d=F(),g=M(X,null),C=M(ke,null),y=M(Me,null),{autoresize:u,manualUpdate:O,loading:f,loadingOptions:n}=oe(t),o=b(()=>d.value||t.option||null),i=b(()=>t.theme||z(g,{})),p=b(()=>t.initOptions||z(C,{})),c=b(()=>t.updateOptions||z(y,{})),h=b(()=>Ie(a)),v={},_=le().proxy.$listeners,w={};_?Object.keys(_).forEach(r=>{G.test(r)?v[r.replace(G,"$1")]=_[r]:w[r]=_[r]}):Object.keys(a).filter(r=>J(r)).forEach(r=>{let l=r.charAt(2).toLowerCase()+r.slice(3);if(l.indexOf("native:")===0){const E=`on${l.charAt(7).toUpperCase()}${l.slice(8)}`;v[E]=a[r];return}l.substring(l.length-4)==="Once"&&(l=`~${l.substring(0,l.length-4)}`),w[l]=a[r]});function A(r){if(!s.value)return;const l=e.value=ue(s.value,i.value,p.value);t.group&&(l.group=t.group),Object.keys(w).forEach($=>{let m=w[$];if(!m)return;let x=$.toLowerCase();x.charAt(0)==="~"&&(x=x.substring(1),m.__once__=!0);let j=l;if(x.indexOf("zr:")===0&&(j=l.getZr(),x=x.substring(3)),m.__once__){delete m.__once__;const ae=m;m=(...ne)=>{ae(...ne),j.off(x,m)}}j.on(x,m)});function E(){l&&!l.isDisposed()&&l.resize()}function K(){const $=r||o.value;$&&l.setOption($,c.value)}u.value?pe(()=>{E(),K()}):K()}function ee(r,l){t.manualUpdate&&(d.value=r),e.value?e.value.setOption(r,l||{}):A(r)}function U(){e.value&&(e.value.dispose(),e.value=void 0)}let P=null;L(O,r=>{typeof P=="function"&&(P(),P=null),r||(P=L(()=>t.option,(l,E)=>{l&&(e.value?e.value.setOption(l,{notMerge:l!==E,...c.value}):A())},{deep:!0}))},{immediate:!0}),L([i,p],()=>{U(),A()},{deep:!0}),Z(()=>{t.group&&e.value&&(e.value.group=t.group)});const te=we(e);return Le(e,f,n),Ce(e,u,s),q(()=>{A()}),ie(()=>{Te&&s.value?s.value.__dispose=U:U()}),{chart:e,root:s,setOption:ee,nonEventAttrs:h,nativeListeners:v,...te}},render(){const t={...this.nonEventAttrs,...this.nativeListeners};return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",re(Q,t)}});const Ue={class:"index"},je={class:"flex ml-10 bolder fz-18"},B="#FF5B5B",Y="#ff3737",R="#91F840",W="#6fda1a",Fe={__name:"index",setup(t){ge(X,"dark");const a=he(),s=V(null),e=ve({data:{list:[],volume:[],trend:[],category:[],openPrice:"",closePrice:"",priceUp:"",percent:""}}),d=b(()=>({red:e.data.closePrice>a.info.data.previousClose,green:e.data.closePrice<a.info.data.previousClose})),g=V(null);L(()=>a.candles.data,()=>{y(),C()},{deep:!0}),q(async()=>{Object.keys(a.candles.data).length===0||Object.keys(a.info.data).length===0||(y(),C())});const C=()=>{e.data.priceUp=(e.data.closePrice-a.info.data.previousClose).toFixed(2),e.data.percent=(e.data.priceUp/a.info.data.previousClose*100).toFixed(2)},y=()=>{e.data.list=a.candles.data.data.map(n=>[n.open,n.close,n.low,n.high]),e.data.trend=a.candles.data.data.map(n=>({value:[O(n.date),n.close]})),console.log(e.data.trend);let f;e.data.volume=a.candles.data.data.map((n,o)=>{let i=1;return f&&(n.close>f?i=1:i=-1),f=n.close,[o,n.volume,i]}),e.data.category=a.candles.data.data.map(n=>O(n.date)),e.data.closePrice=e.data.list[e.data.list.length-1][1],e.data.openPrice=e.data.list[0][0],g.value={backgroundColor:"#131313",title:{text:"即時走勢",left:10,top:10,bottom:10,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0,0,0,0.3)",textStyle:{color:"#FFF"},formatter:function(n){let o=n.filter(v=>v.axisIndex==0)[0],i=n.filter(v=>v.axisIndex==1)[0],p=e.data.list[o.dataIndex-1][1],c=(o.value[2]-p).toFixed(2),h=(c/p*100).toFixed(2);return`<div style=" text-align: left;">
                            ${n[0].name} <br/>
                            <span style="color:${u(o.value[1],p)}">開 :<span style="margin-left: 20px">${o.value[1]}</span></span><br/>
                            <span style="color:${u(o.value[2],p)}">收 :<span style="margin-left: 20px">${o.value[2]}</span></span><br/>
                            <span style="color:${u(o.value[3],p)}">低 :<span style="margin-left: 20px">${o.value[3]}</span></span><br/>
                            <span style="color:${u(o.value[4],p)}">高 :<span style="margin-left: 20px">${o.value[4]}</span></span><br/> 
                            <span style="color:${u(c)}">${c>0?"漲":"跌"} :<span style="margin-left: 20px">${c>0?"+"+c:c}</span></span><br/>
                            <span style="color:${u(c)}">幅 :<span style="margin-left: 20px">${c>0?"+"+h:h}%</span></span><br/>
                            量 :<span style="margin-left: 20px">${(i.value[1]/1e8).toFixed(3)}億元</span><br/> 
                        </div>`},position:function(n,o,i,p,c){const h={top:10};return h[["left","right"][+(n[0]<c.viewSize[0]/2)]]=30,h}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:0,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:0,end:100}],visualMap:[{show:!1,seriesIndex:1,dimension:2,pieces:[{value:-1,color:R},{value:1,color:B}]},{show:!1,seriesIndex:2,dimension:1,pieces:[{lte:a.info.data.previousClose-1,color:W},{gt:a.info.data.previousClose,color:Y}]}],legend:{selected:{一分K:!1,走勢:!0},top:10,data:["走勢","一分K"]},series:[{name:"一分K",type:"candlestick",data:e.data.list,itemStyle:{color:B,color0:R,borderColor:Y,borderColor0:W},tooltip:{formatter:function(n){return n.name+"<br>"+(n.data.coord||"")}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:e.data.volume},{name:"走勢",type:"line",showSymbol:!1,data:e.data.trend,markLine:{label:{show:!1},symbol:["none","none"],data:[{yAxis:a.info.data.previousClose,name:"固定值 100"}]}}],grid:[{left:"10%",right:"8%",height:"50%"},{left:"10%",right:"8%",top:"63%",height:"16%"}],xAxis:[{type:"category",data:e.data.category,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:e.data.category,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0},splitLine:{lineStyle:{type:"dashed",color:"#3C3C3C",width:1}},min:n=>e.data.openPrice>a.info.data.previousClose?a.info.data.previousClose*.99:n.min*.99,max:n=>e.data.openPrice>a.info.data.previousClose?n.max*1.01:a.info.data.previousClose*1.01},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}]}},u=(f,n=0)=>{if(f!=n)return f>n?B:R},O=(f,n)=>{let o=f,i=new Date(o),p=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0"),h=String(i.getDate()).padStart(2,"0"),v=String(i.getHours()).padStart(2,"0"),_=String(i.getMinutes()).padStart(2,"0"),w=String(i.getSeconds()).padStart(2,"0");return`${v}:${_}`};return(f,n)=>{const o=ye,i=_e;return me(),xe("div",Ue,[I("div",je,[I("div",null,T(H(a).info.data.name),1),I("div",{class:N([d.value,"ml-10"])},T(e.data.closePrice),3),I("div",{class:N([d.value,"ml-10"])},T(`${e.data.priceUp>0?"+":"-"}${e.data.priceUp}`),3),I("div",{class:N([d.value,"ml-10"])},T(`${e.data.priceUp>0?"+":"-"}${e.data.percent}%`),3)]),k(i,{gutter:20,class:"row"},{default:D(()=>[k(o,{span:10},{default:D(()=>[k(H(ze),{ref_key:"chart",ref:s,class:"chart",option:g.value,autoresize:""},null,8,["option"])]),_:1}),k(o,{span:12},{default:D(()=>[be(" 11 ")]),_:1})]),_:1})])}}},De=fe(Fe,[["__scopeId","data-v-3b2db81a"]]);export{De as default};
